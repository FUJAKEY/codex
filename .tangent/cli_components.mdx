# Codex CLI â€” Components Documentation

Codex CLI uses a modular React architecture for its interactive terminal UI, organized under `src/components`. The components are designed for composability and support all the chat, review, and session management workflows seen in the CLI.

---

## Key Components

### Chat Components (`chat/`)
- **`terminal-chat.tsx`**: The main container for the interactive chat session. Handles initialization, overlay management, command approval logic, context compaction, and end-to-end prompt-response/review workflows.
- **`terminal-chat-input.tsx`**: The rich input area under chat, supporting multi-line editing, history, slash-commands, input completion, file tag suggestions, and interaction with overlays and the agent.
- **`terminal-chat-past-rollout.tsx`**: Presents and navigates through previous chat sessions (rollouts).
- **`terminal-chat-command-review.tsx`**: UI for reviewing and approving/rejecting shell commands and patches generated by the agent.
- **`terminal-chat-tool-call-command.tsx`**: Component for handling tool-based invocation and review within chat.
- **Other helpers**: `multiline-editor.tsx`, `message-history.tsx`, etc. manage chat state, message groups, editor states, and more.

### Overlay & Utility Components
- **`approval-mode-overlay.tsx`**: Modal for selecting/switching the command approval mode via the UI.
- **`diff-overlay.tsx`**: Overlay for visually reviewing file diffs generated by the agent.
- **`help-overlay.tsx`**: Overlay with help, keyboard shortcuts, and feature explanations.
- **`history-overlay.tsx`**: UI for browsing past sessions and command history.
- **`model-overlay.tsx`**: Overlay for viewing and switching AI models and providers used for completion.
- **`sessions-overlay.tsx`**: Handles session selection, resume, and review of saved chat sessions.
- **`typeahead-overlay.tsx`**: Generic typeahead-style modal used by overlays (e.g., for picking models or modes).
- **Vendor**: Re-exports third-party Ink-based primitives (e.g., ink-spinner, ink-text-input).

### Single-Pass Mode
- **`singlepass-cli-app.tsx`**: Top-level UI for batch-mode (single-pass) editing, including prompt history, context selection, diff and edit summary generation, and direct patch application workflows.

---

## Usage Example

**Interactive chat session:**
```typescript
import TerminalChat from './components/chat/terminal-chat';
// Render as React element in CLI:
<TerminalChat config={config} approvalPolicy="suggest" ... />
```

**Switch approval mode in command UI:**
```typescript
import ApprovalModeOverlay from './components/approval-mode-overlay';
<ApprovalModeOverlay currentMode={mode} onSelect={fn} onExit={fn} />
```

---

## Related Documentation
- [CLI Core Modules](./cli_modules.mdx)
- [Hooks & Utilities](./cli_hooks_utils.mdx)
- [Repository Overview](./overview.mdx)
