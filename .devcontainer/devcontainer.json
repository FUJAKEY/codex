{
  "name": "codex",
  // Force host arch to avoid VS Code adding --platform=linux/arm64
  "platform": "linux/amd64",
  "image": "ubuntu:24.04",
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {},
    "ghcr.io/devcontainers/features/rust:1": {
      "profile": "minimal",
      "version": "latest",
      "components": "clippy,rustfmt",
      "targets": "aarch64-unknown-linux-musl"
    }
  },
  "remoteUser": "root",
  "containerEnv": {
    "CARGO_TARGET_DIR": "/workspaces/codex/codex-rs/target-arm64"
  },
  // Remove if you later add your own CMD/ENTRYPOINT
  "overrideCommand": true,
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash"
      },
      "extensions": ["rust-lang.rust-analyzer", "tamasfe.even-better-toml"]
    }
  }
}
