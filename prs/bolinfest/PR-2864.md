# PR #2864: Fix CI release build

- URL: https://github.com/openai/codex/pull/2864
- Author: dedrisian-oai
- Created: 2025-08-29 02:41:55 UTC
- Updated: 2025-08-29 03:06:18 UTC
- Changes: +4/-2, Files changed: 1, Commits: 2

## Description

(No description.)

## Full Diff

```diff
diff --git a/codex-rs/tui/src/slash_command.rs b/codex-rs/tui/src/slash_command.rs
index c266c4746a..3268a92a2d 100644
--- a/codex-rs/tui/src/slash_command.rs
+++ b/codex-rs/tui/src/slash_command.rs
@@ -66,8 +66,10 @@ impl SlashCommand {
             | SlashCommand::Mention
             | SlashCommand::Status
             | SlashCommand::Mcp
-            | SlashCommand::Quit
-            | SlashCommand::TestApproval => true,
+            | SlashCommand::Quit => true,
+
+            #[cfg(debug_assertions)]
+            SlashCommand::TestApproval => true,
         }
     }
 }
```

## Review Comments

### codex-rs/tui/src/slash_command.rs

- Created: 2025-08-29 02:56:12 UTC | Link: https://github.com/openai/codex/pull/2864#discussion_r2309001536

```diff
@@ -62,12 +62,19 @@ impl SlashCommand {
             | SlashCommand::Model
             | SlashCommand::Approvals
             | SlashCommand::Logout => false,
+            #[cfg(debug_assertions)]
             SlashCommand::Diff
             | SlashCommand::Mention
             | SlashCommand::Status
             | SlashCommand::Mcp
             | SlashCommand::Quit
             | SlashCommand::TestApproval => true,
+            #[cfg(not(debug_assertions))]
+            SlashCommand::Diff
```

> Why are we disabling diff instead of TestCommand?