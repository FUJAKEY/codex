# PR #1629: Don't drop sessions on elicitation responses

- URL: https://github.com/openai/codex/pull/1629
- Author: gpeal
- Created: 2025-07-20 01:57:01 UTC
- Updated: 2025-07-20 17:31:29 UTC
- Changes: +4/-2, Files changed: 1, Commits: 1

## Description

(No description.)

## Full Diff

```diff
diff --git a/codex-rs/mcp-server/src/codex_tool_runner.rs b/codex-rs/mcp-server/src/codex_tool_runner.rs
index 3036df5188..ae54599f9d 100644
--- a/codex-rs/mcp-server/src/codex_tool_runner.rs
+++ b/codex-rs/mcp-server/src/codex_tool_runner.rs
@@ -131,7 +131,8 @@ pub async fn run_codex_tool_session(
                             });
                         }
 
-                        break;
+                        // Continue, don't break so the session continues.
+                        continue;
                     }
                     EventMsg::ApplyPatchApprovalRequest(_) => {
                         let result = CallToolResult {
@@ -144,7 +145,8 @@ pub async fn run_codex_tool_session(
                             structured_content: None,
                         };
                         outgoing.send_response(id.clone(), result.into()).await;
-                        break;
+                        // Continue, don't break so the session continues.
+                        continue;
                     }
                     EventMsg::TaskComplete(TaskCompleteEvent { last_agent_message }) => {
                         let text = match last_agent_message {
```

## Review Comments

### codex-rs/mcp-server/src/codex_tool_runner.rs

- Created: 2025-07-20 06:01:40 UTC | Link: https://github.com/openai/codex/pull/1629#discussion_r2217587164

```diff
@@ -131,7 +131,8 @@ pub async fn run_codex_tool_session(
                             });
                         }
 
-                        break;
+                        // Continue, don't break so the session continues.
```

> Should we keep this comment?

- Created: 2025-07-20 06:01:52 UTC | Link: https://github.com/openai/codex/pull/1629#discussion_r2217587503

```diff
@@ -144,7 +145,8 @@ pub async fn run_codex_tool_session(
                             structured_content: None,
                         };
                         outgoing.send_response(id.clone(), result.into()).await;
-                        break;
+                        // Continue, don't break so the session continues.
```

> And here?